{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://software.psion.info/api/v1/program.schema.json",
    "title": "Program",
    "description": "Single program representing a group of versions and variants.",
    "type": "object",
    "properties": {
        "id": {"type": "string"},
        "uid": {"type": "string"},
        "name": {"type": "string"},
        "versions": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "version": {"type": "string"},
                    "variants": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "identifier": {"type": "string"},
                                "items": {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "filename": {"type": "string"},
                                            "size": {"type": "integer"},
                                            "reference": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {"type": "string"},
                                                        "url": {"type": ["string", "null"]}
                                                    },
                                                    "required": ["name", "url"],
                                                    "additionalProperties": false
                                                }
                                            },
                                            "kind": {
                                                "enum": ["installer", "standalone"]
                                            },
                                            "sha256": {"type": "string"},
                                            "id": {"type": "string"},
                                            "uid": {"type": "string"},
                                            "name": {"type": "string"},
                                            "tags": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            },
                                            "version": {"type": "string"},
                                            "icon": {
                                                "type": "object",
                                                "properties": {
                                                    "path": {"type": "string"},
                                                    "width": {"type": "number"},
                                                    "height": {"type": "number"}
                                                },
                                                "required": ["path", "width", "height"],
                                                "additionalProperties": false
                                            },
                                            "icons": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "path": {"type": "string"},
                                                        "width": {"type": "number"},
                                                        "height": {"type": "number"},
                                                        "bpp": {"type": "integer"},
                                                        "filename": {"type": "string"},
                                                        "sha256": {"type": "string"}
                                                    },
                                                    "required": ["width", "height", "bpp", "filename", "sha256"],
                                                    "additionalProperties": false
                                                }
                                            },
                                            "fingerprint": {"type": "string"},
                                            "platform": {"enum": ["epoc16", "epoc32"]}
                                        },
                                        "required": [
                                            "filename",
                                            "size",
                                            "reference",
                                            "kind",
                                            "sha256",
                                            "id",
                                            "name",
                                            "tags",
                                            "version",
                                            "platform"
                                        ],
                                        "additionalProperties": false
                                    }
                                }
                            },
                            "required": ["identifier", "items"],
                            "additionalProperties": false
                        }
                    }
                },
                "required": ["version", "variants"],
                "additionalProperties": false
            }
        },
        "tags": {
            "type": "array",
            "items": {"type": "string"}
        },
        "kinds": {
            "type": "array",
            "items": {"enum": ["installer", "standalone"]}
        },
        "platforms": {
            "type": "array",
            "items": {"enum": ["epoc16", "epoc32"]}
        },
        "icon": {
            "type": "object",
            "properties": {
                "path": {"type": "string"},
                "width": {"type": "number"},
                "height": {"type": "number"}
            },
            "required": ["path", "width", "height"],
            "additionalProperties": false
        },
        "screenshots": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "width": {"type": "integer"},
                    "height": {"type": "integer"},
                    "path": {"type": "string"}
                },
                "required": ["width", "height", "path"],
                "additionalProperties": false
            }
        },
        "subtitle": {"type": "string"},
        "category": {"enum": [
            "connectivity/web",
            "connectivity/other",
            "games/action",
            "games/adventure",
            "games/arcade",
            "games/board",
            "games/puzzle",
            "games/racing",
            "games/rpg",
            "games/shooter",
            "games/simulation",
            "games/sports",
            "games/strategy",
            "games/other",
            "multimedia/ebooks",
            "multimedia/music",
            "multimedia/photo",
            "multimedia/video",
            "multimedia/other",
            "productivity/calculators",
            "productivity/date-and-time",
            "productivity/graphics",
            "productivity/office",
            "productivity/organizers",
            "productivity/scientific",
            "productivity/other",
            "system/addons",
            "system/file-management",
            "system/input",
            "system/utilities",
            "system/other",
            "desktop/other"
        ]},
        "authors": {
            "type": "array",
            "items": {"type": "string"}
        },
        "publishers": {
            "type": "array",
            "items": {"type": "string"}
        },
        "description": {"type": "string"},
        "links": {
            "type": "array",
            "items": {"type": "string"}
        }
    },
    "required": ["id", "name", "tags", "kinds", "platforms"],
    "additionalProperties": false
}
